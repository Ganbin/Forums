/*	The helloWorld() function can be executed from any of your project's server-side JavaScript file using the require() method as follows:	var result = require('namespace').helloWorld();	For more information, refer to http://doc.wakanda.org/Wakanda Studio0.Beta/help/Title/en/page3355.html*/exports.validateEmail = function (email) {	var emailPattern = /^[a-zA-Z0-9._]+[a-zA-Z0-9]+@[a-zA-Z0-9]+\.[a-zA-Z]{2,4}$/;      return emailPattern.test(email);};// This method send an email with the settings define in the forumSettings file// Parameters ://				sendTo (string) : the adress mail to send//				subject (string) : the subject of the message//				contentType (string) : the content-type of the message content ("text/plain" or "text/html")//				messageContent(string) : the content of the message//// Return :  An object containing status information that you can use to check if the send was successful. (For more informations, see http://doc.wakanda.org/WAF-Mail/Mail-Instances/send.301-809249.en.html)exports.sendMail = function(sendTo,subject,contentType,messageContent){	var mailSettings = exports.getMailSettings();	var mail = require('waf-mail/mail');	var message = new mail.Mail();	message.addField('From', mailSettings.username);	message.addField('To', sendTo);	message.addField('Subject', subject);	message.setBodyType(contentType);	message.setBody(messageContent);		var sendingMail = message.send(mailSettings.smtp , mailSettings.port , mailSettings.SSL, mailSettings.username, mailSettings.password);	return sendingMail;	};/* * Getter and Setter for the forumSettings * Settings file is located <Project Folder>/forumSettings/forumSettings.json */  // GETTERS// ID of the member groupexports.getMemberGroupID = function(){	var folder = getFolder();	var forumSettingsFile = File(folder.path+"forumSettings/forumSettings.json");	var forumSettings = JSON.parse(forumSettingsFile.toString());		return forumSettings.memberGroupID;};// ID of the dataAdmin groupexports.getDataAdminGroupID = function(){	var folder = getFolder();	var forumSettingsFile = File(folder.path+"forumSettings/forumSettings.json");	var forumSettings = JSON.parse(forumSettingsFile.toString());		return forumSettings.dataAdminGroupID;};// ID of the public groupexports.getPublicGroupID = function(){	var folder = getFolder();	var forumSettingsFile = File(folder.path+"forumSettings/forumSettings.json");	var forumSettings = JSON.parse(forumSettingsFile.toString());		return forumSettings.publicGroupID;};// Flag to know if the validation is done by email or notexports.getValidationByEmail = function(){	var folder = getFolder();	var forumSettingsFile = File(folder.path+"forumSettings/forumSettings.json");	var forumSettings = JSON.parse(forumSettingsFile.toString());		return forumSettings.validationByEmail;};// Get the title of the forumexports.getForumTitle = function(){	var folder = getFolder();	var forumSettingsFile = File(folder.path+"forumSettings/forumSettings.json");	var forumSettings = JSON.parse(forumSettingsFile.toString());		return forumSettings.forumTitle;};// Get the mail settings of the forum. return a object with 4 properties : username,password,smtp,portexports.getMailSettings = function(){	var folder = getFolder();	var forumSettingsFile = File(folder.path+"forumSettings/forumSettings.json");	var forumSettings = JSON.parse(forumSettingsFile.toString());		return forumSettings.mailSettings;};exports.getPostViewTimeout = function(){	var folder = getFolder();	var forumSettingsFile = File(folder.path+"forumSettings/forumSettings.json");	var forumSettings = JSON.parse(forumSettingsFile.toString());		return forumSettings.postViewTimeout;};// SETTERexports.setValidationByEmail = function(validationByEmail){	var folder = getFolder();	var forumSettingsFile = File(folder.path+"forumSettings/forumSettings.json");	var forumSettings = JSON.parse(forumSettingsFile.toString());		forumSettings.validationByEmail = validationByEmail;		var JSONTextStream = TextStream(forumSettingsFile,'Overwrite');	JSONTextStream.write(JSON.stringify(forumSettings));	JSONTextStream.close();};exports.setForumTitle = function(forumTitle){	var folder = getFolder();	var forumSettingsFile = File(folder.path+"forumSettings/forumSettings.json");	var forumSettings = JSON.parse(forumSettingsFile.toString());		forumSettings.forumTitle = forumTitle;		var JSONTextStream = TextStream(forumSettingsFile,'Overwrite');	JSONTextStream.write(JSON.stringify(forumSettings));	JSONTextStream.close();};exports.setPublicGroupID = function(publicGroupID){	var folder = getFolder();	var forumSettingsFile = File(folder.path+"forumSettings/forumSettings.json");	var forumSettings = JSON.parse(forumSettingsFile.toString());		forumSettings.publicGroupID = publicGroupID;		var JSONTextStream = TextStream(forumSettingsFile,'Overwrite');	JSONTextStream.write(JSON.stringify(forumSettings));	JSONTextStream.close();};exports.setMemberGroupID = function(memberGroupID){	var folder = getFolder();	var forumSettingsFile = File(folder.path+"forumSettings/forumSettings.json");	var forumSettings = JSON.parse(forumSettingsFile.toString());		forumSettings.memberGroupID = memberGroupID;		var JSONTextStream = TextStream(forumSettingsFile,'Overwrite');	JSONTextStream.write(JSON.stringify(forumSettings));	JSONTextStream.close();};exports.setDataAdminGroupID = function(dataAdminGroupID){	var folder = getFolder();	var forumSettingsFile = File(folder.path+"forumSettings/forumSettings.json");	var forumSettings = JSON.parse(forumSettingsFile.toString());		forumSettings.dataAdminGroupID = dataAdminGroupID;		var JSONTextStream = TextStream(forumSettingsFile,'Overwrite');	JSONTextStream.write(JSON.stringify(forumSettings));	JSONTextStream.close();};// Set the mail settings// mailSettings : object containing 4 properties : username(string),password(string),smtp(string),port(number)exports.setMailSettings = function(mailSettings){	var folder = getFolder();	var forumSettingsFile = File(folder.path+"forumSettings/forumSettings.json");	var forumSettings = JSON.parse(forumSettingsFile.toString());		forumSettings.mailSettings.username = mailSettings.username;	forumSettings.mailSettings.password = mailSettings.password;	forumSettings.mailSettings.smtp = mailSettings.smtp;	forumSettings.mailSettings.port = mailSettings.port;	forumSettings.mailSettings.SSL = mailSettings.SSL;		var JSONTextStream = TextStream(forumSettingsFile,'Overwrite');	JSONTextStream.write(JSON.stringify(forumSettings));	JSONTextStream.close();};exports.setPostViewTimeout = function(postViewTimeout){	var folder = getFolder();	var forumSettingsFile = File(folder.path+"forumSettings/forumSettings.json");	var forumSettings = JSON.parse(forumSettingsFile.toString());		forumSettings.postViewTimeout = postViewTimeout;		var JSONTextStream = TextStream(forumSettingsFile,'Overwrite');	JSONTextStream.write(JSON.stringify(forumSettings));	JSONTextStream.close();};